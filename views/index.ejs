<!DOCTYPE html>
<%-include header%>
<%-include indexSearch%>
<%-include userReadStatus%>
<style type="text/css">
	#book_nav{
		margin-top:0px;
		margin-right:0px;
		text-align:right;
		float:right;
		width:100%;
		background-color: #ffffff;
		opacity: 0.9; 
		-webkit-border-radius:0px 0px 5px 5px;
		-moz-border-radius:0px 0px 5px 5px;
		border-radius:0px 0px 5px 5px;
		border:1px solid #E5E5E5;
		-webkit-transition:all 0.3s ease;
		-moz-transition:all 0.3s ease;
		-ms-transition:all 0.3s ease;
		-o-transition:all 0.3s ease;
		transition:all 0.3s ease;
	}
	.book_nav_inner{
		width:90%;
		height:100%;
		margin-left: auto;
	}
	.book_nav_row{
		width:100%;
		margin-top:5px;
		display:inline-block;
	}
	.book_row_left{
		width:50%;
		float:left;
		text-align: right ; 
		padding-right:0px;
	}
	.book_row_left:hover{
		text-decoration: underline;
	}
	.book_row_text_left:hover{
		text-decoration: underline;
	}
	.book_row_text_left{
		width:90px;
		float:right;
		text-align: left;
		padding-left:10px;
		border-left:3px solid #d3d0d9;
		cursor: pointer;
	}
	.book_row_text_left:hover{
		border-left:3px solid red;
	}
	.wrapper , .recommandedCls {
		position: relative;
		margin-left:auto;
		margin-right: auto;
		display:block ; 
		width:100%;
		height:260px;
		-webkit-border-radius:0px 0px 2px 2px;
		-moz-border-radius:0px 0px 2px 2px;
		border-radius:0px 0px 2px 2px;
		border:1px solid #E5E5E5;
		-webkit-transition:all 0.3s ease;
		-moz-transition:all 0.3s ease;
		-ms-transition:all 0.3s ease;
		-o-transition:all 0.3s ease;
		transition:all 0.3s ease;
		text-align: center;
		padding-top:0px;
	}
	.recommandedCls:first-child{
		margin-top:0px;
	}
	.recommandedCls
	{
		height:630px;
		padding-left:0px;
		width:100%;
		text-align:left;
		margin-top: 5px;
	}
	.recommandedTopBarCls
	{
		height:30px;
		line-height:30px;
		text-align:left ; 
		padding-left:5px;
		border-bottom:1px solid #E5E5E5;
		margin-left:0px;
	}
	.re_text{
		float:left;
		font-size:14px;
		color:#FD9B1C;
	}
	.re_more
	{
		float:right;
		font-size:12px;
		color:#D3D0D9;
		margin-right:5px;
	}
	.re_more:hover{
		cursor:pointer;  
		color:#D3D000;
	}
	.recommanedContentCls
	{
		height:366px;
		text-align:left ; 
		margin-left:0px;
		margin-top:2px;
		padding-right:10px;
		padding-top:10px;
	}
	.recommandedImgCls , .recommandedImgCls_small{
		-webkit-transition:all 0.3s ease;
		-moz-transition:all 0.3s ease;
		-ms-transition:all 0.3s ease;
		-o-transition:all 0.3s ease;
		transition:all 0.3s ease;
	}
	.recommandedImgCls{
		height:140px;
		width:100px;
	}
	.recommandedImgCls_small{
		height:110px;
		width:80px;
		margin-top:10px;
	}
	.recommandedImgCls:hover,recommandedImgCls_small:hover{
		cursor:pointer;
	}
	.recommandedOneBook
	{
		width:100px;
		float:left;
		margin-left:33px;
	}
	.recommandedOneBook_small
	{
		width:80px;
		float:left;
		margin-left:20px;
	}
	.bookTextCls
	{
		font-size:10px;
		width:100%;
		text-align:left;
		cursor:pointer;
	}
	.bookTextCls a{
		font-size:10px;
		color:#644235;
	}
	.bookTextCls a:hover{
		color:#FD9B1C;
	}
	.bookTextCls a:active{
		color:red;
	}
	.ul_star{
		list-style:none;
		height:12px;
		width:100%;
		margin-left:0px;
	}
	.li_star{
		float:left;
		heght:12px;
		width:12px;
		padding-top:0px;
		display:block;
		line-height:10px;
	}
	.li_img{
		height:100%;
		width:100%;
		vertical-align:middle;
		margin-top:0px;
	}
	#newBookDiv , #hotSearchBookDiv,#listBookDiv{
		height:577.5px;
		margin-top:5px;
		margin-right:0px;
		text-align:right;
		float:right;
		width:100%;
		background-color: #ffffff;
		opacity: 0.9; 
		-webkit-border-radius:0px 0px 5px 5px;
		-moz-border-radius:0px 0px 5px 5px;
		border-radius:0px 0px 5px 5px;
		border:1px solid #E5E5E5;
		-webkit-transition:all 0.3s ease;
		-moz-transition:all 0.3s ease;
		-ms-transition:all 0.3s ease;
		-o-transition:all 0.3s ease;
		transition:all 0.3s ease;
	}
</style>
<body>
	<div class="container" style='margin-top:15px;'>
		<div class="row">
			<%include signInPrompt%>
			<div class="span3 bs-docs-sidebar">
				<div id="book_nav">
					<div class="recommandedTopBarCls">
						<span class="re_text" style='padding-left:11px;'>
							类别标签
						</span>
						<span class="re_more" title="还有more哦">
							more>>
						</span>
					</div>
			    	<div class="book_nav_inner">
				    	<div id="categray_container">
				    	</div>
			    	</div>
			    </div>
			    <div id="newBookDiv">
			    	<div class="recommandedTopBarCls">
						<span class="re_text">
							新书
						</span>
						<span class="re_more" title="我要新鲜感">
							more>>
						</span>
					</div>
					<div class="recommanedContentCls" id="newBooksContent">
					</div>
			    </div>
			    <div id="hotSearchBookDiv">
			    	<div class="recommandedTopBarCls">
						<span class="re_text">
							搜索排行
						</span>
						<span class="re_more" title="即视感好强">
							more>>
						</span>
					</div>
					<div class="recommanedContentCls" id="hotSearchBooksContent">
					</div>
			    </div>
			     <div id="listBookDiv">
			    	<div class="recommandedTopBarCls">
						<span class="re_text">
							精彩书列
						</span>
						<span class="re_more" title="大家都喜欢的哦">
							more>>
						</span>
					</div>
					<div class="recommanedContentCls" id="listBooksContent">
					</div>
			    </div>
			</div>
			<div class="span9">
				<div id="recommandedBooksDiv" class='recommandedCls'>
					<div class="recommandedTopBarCls">
						<span class="re_text">
							推荐
						</span>
						<span class="re_more" title="查看more推荐书籍,分享快乐">
							more>>
						</span>
					</div>
					<div class="recommanedContentCls" id="recommandedContent">
					</div>
				</div>
				<div id="recommandedBooksDiv" class='recommandedCls'>
					<div class="recommandedTopBarCls">
						<span class="re_text">
							热门
						</span>
						<span class="re_more" title="查看more热门图书">
							more>>
						</span>
					</div>
					<div class="recommanedContentCls" id="hotContent">
					</div>
				</div>
		    </div>
		</div>
	</div>
	<%-include bottomBar%>
	<script type="text/javascript">
		$.ajax({
			type : 'get' , 
			data : null , 
			url : "/categray/getAllUpSateCategrays" , 
			datatype : "json" , 
			timeout : 6000 , 
			success : function(result , state , req){
				var categray_container = $("#categray_container") ;
				var t = 0 ;
				var i_html = '<div class="book_nav_row">' ;   
				$.each(result , function(i){
					var item = result[i] ; 
					t ++ ; 
					i_html += '<div class="book_row_left"><div class="book_row_text_left"><span>'+item.name+'</span></div></div>' ; 
					if(t == 2)
					{
						i_html += '</div>' ;
						categray_container.append(i_html) ; 
						i_html = '<div class="book_nav_row">' ; 
						t = 0 ;
					}
				}) ; 
			} , 
			falture : function(result , state , req){
				console.log('获取书籍分类信息失败!') ; 
			}
		}) ; 
		$.ajax({
			type : 'get' , 
			data : null , 
			url : "/book/getRecommandedBooks" , 
			datatype : "json" , 
			timeout : 6000 , 
			success : function(result , state , req){
				var recommandedContent = $('#recommandedContent') ; 
				$.each(result , function(i){
					var item = result[i] ; 
					if(item.images.length>0)
					{
						var i_html = '<div class="recommandedOneBook"><img class="recommandedImgCls" src='+item.images[0].url + unescape(item.images[0].filename)+'><div class="bookTextCls"><a href="/book/'+item._id+'" target="_self">'+item.name+'</a></div><ul class="ul_star"><li class="li_star"><img src="/images/star/full.png" class="li_img"><li><li class="li_star"><img src="/images/star/full.png" class="li_img"><li><li class="li_star"><img src="/images/star/full.png" class="li_img"><li><li class="li_star"><img src="/images/star/full.png" class="li_img"><li><li class="li_star"><img src="/images/star/full.png" class="li_img"><li></ul></div>' ;
						recommandedContent.append(i_html) ; 
					}
				}) ; 
			} , 
			falture : function(result , state , req){
				console.log('获取编辑推荐书籍信息失败!') ; 
			}
		}) ;
		$.ajax({
			type : 'get' , 
			data : null , 
			url : "/book/getHotBooks" , 
			datatype : "json" , 
			timeout : 6000 , 
			success : function(result , state , req){
				var hotContent = $('#hotContent') ; 
				$.each(result , function(i){
					var item = result[i] ; 
					if(item.images.length>0)
					{
						var i_html = '<div class="recommandedOneBook"><img class="recommandedImgCls" src='+item.images[0].url + unescape(item.images[0].filename)+'><div class="bookTextCls"><a>'+item.name+'</a></div><ul class="ul_star"><li class="li_star"><img src="/images/star/full.png" class="li_img"><li><li class="li_star"><img src="/images/star/full.png" class="li_img"><li><li class="li_star"><img src="/images/star/full.png" class="li_img"><li><li class="li_star"><img src="/images/star/full.png" class="li_img"><li><li class="li_star"><img src="/images/star/full.png" class="li_img"><li></ul></div>' ;
						hotContent.append(i_html) ; 
					}
				}) ; 
			} , 
			falture : function(result , state , req){
				console.log('获取编辑推荐书籍信息失败!') ; 
			}
		}) ;
		$.ajax({
			type : 'get' , 
			data : null , 
			url : "/book/getNewBooks" , 
			datatype : "json" , 
			timeout : 6000 , 
			success : function(result , state , req){
				var newBooksContent = $('#newBooksContent') ; 
				var totalCount = result.totalCount ; 
				var items = result.items ; 
				for(var i = 0 ; i < items.length ; i ++)
				{
					var item = items[i] ; 
					if(item.images.length>0)
					{
						var i_html = '<div class="recommandedOneBook_small"><img class="recommandedImgCls_small" src='+item.images[0].url + unescape(item.images[0].filename)+'><div class="bookTextCls"><a>'+item.name+'</a></div><div class="bookTextCls"><a>'+item.authors[0].name+'</a>/<a>'+item.bookCategray[0].name+'</a></div></div>' ;
						newBooksContent.append(i_html) ; 
					}
				} 
			} , 
			falture : function(result , state , req){
				console.log('获取编辑推荐书籍信息失败!') ; 
			}
		}) ;
	</script>
</body>
